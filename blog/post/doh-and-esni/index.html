<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>如何翻墙[5]: 兼谈 DoH &#43; ESNI 突破审查 | Tecrobe&#39;s Blog</title>



<link rel="stylesheet" href="/blog/css/style.css"/><link rel='stylesheet' href='https://tecrobe.github.io/blog/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://tecrobe.github.io/blog">
          <h1 class="title is-4">Tecrobe&#39;s Blog</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
    </div>
    <h2 class="subtitle is-6">April 5, 2019</h2>
    <h1 class="title">如何翻墙[5]: 兼谈 DoH &#43; ESNI 突破审查</h1>
    
    <div class="content">
      <p>仔细看了 GFW 封锁原理那篇文章的同学应该还记得，<code>DNS 污染</code> 和 <code>SNI 检测</code> 是 GFW 的主要策略。</p>

<p>而 DoH (DNS over HTTPS) 和 ESNI (Encrypted SNI) 则是为了对付 GFW 这两招而发明的。</p>

<p>DoH 现已较完善，可是 ESNI 限于应用规模，效果还不理想（仅有部分网站支持 ESNI ，主要是 CloudFlare 以及 CDN）</p>

<p>因此综合起来应用仍然十分受限。不过一旦 ESNI 的应用有了一定规模，一定是对付 GFW 的一大利器。</p>

<p>目前通过 DoH + ESNI 组合突破封锁，已知有效的有:</p>

<ul>
<li><p><a href="https://medium.com" target="_blank">https://medium.com</a></p></li>

<li><p><a href="https://program-think-mirror.github.io" target="_blank">https://program-think-mirror.github.io</a></p></li>
</ul>

<p>本文来介绍下，如何启用 DoH + ESNI 。</p>

<p>注：当前只有 Firefox 支持 DoH 和 ESNI，故用 Firefox 进行演示。</p>

<h1 id="启用-dns-over-https">启用 DNS over HTTPS</h1>

<p>进入 首选项 - 常规 - 网络设置，如图：</p>

<p><img src="/blog/image/doh.png" alt="DoH" /></p>

<p>勾选 <code>启用基于 HTTPS 的 DNS</code> ，然后 使用默认值 即可。</p>

<h1 id="启用-esni">启用 ESNI</h1>

<p>在 Firefox 地址栏输入 <code>about:config</code>。</p>

<p>在搜索栏中输入 <code>esni</code> ，双击 <code>network.security.esni.enabled</code> ，确认 <code>值</code> 为 <code>true</code>。</p>

<p><img src="/blog/image/esni.png" alt="ESNI" /></p>

<h1 id="番外">番外</h1>

<p>完成上面两步后，你就成功启用 DoH + ESNI 了！</p>

<p>启用之后，你就可以【免翻墙】使用 Google 了！</p>

<p>好吧，准确来说，是可以【免翻墙】使用 StartPage 了，StartPage 相当于一个 Google 搜索代理，搜索内容和 Google 一样，因此相当于可以使用 Google 了。</p>

<p>不过你直接打开 <a href="https://startpage.com" target="_blank">https://startpage.com</a> 还是没辙，打不开。你需要做一些小小的处理。</p>

<ul>
<li>进入 首选项 - 搜索，点击 <code>寻找更多搜索引擎</code></li>
</ul>

<p><img src="/blog/image/startpage1.png" alt="StartPage" /></p>

<ul>
<li>在弹出来的页面中，点击右上角搜索栏，输入 StartPage</li>
</ul>

<p><img src="/blog/image/startpage2.png" alt="StartPage" /></p>

<ul>
<li>点击 <code>Startpage (SSL)</code></li>
</ul>

<p><img src="/blog/image/startpage3.png" alt="StartPage" /></p>

<ul>
<li>点击 <code>+ 添加到 Firefox</code></li>
</ul>

<p>添加完毕后，在 Firefox 地址栏输入任意内容，使用 StartPage 搜索即可。</p>
      
      <div class="related">
</div>
      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
  </div>
</section>



</body>
</html>

